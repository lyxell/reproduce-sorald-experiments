diff --git a/src/main/java/org/mitre/dsmiley/httpproxy/ProxyServlet.java b/src/main/java/org/mitre/dsmiley/httpproxy/ProxyServlet.java
index 6fe462f..700c2c6 100644
--- a/src/main/java/org/mitre/dsmiley/httpproxy/ProxyServlet.java
+++ b/src/main/java/org/mitre/dsmiley/httpproxy/ProxyServlet.java
@@ -800,7 +800,6 @@ public class ProxyServlet extends HttpServlet {
   protected CharSequence encodeUriQuery(CharSequence in, boolean encodePercent) {
     //Note that I can't simply use URI.java to encode because it will escape pre-existing escaped things.
     StringBuilder outBuf = null;
-    Formatter formatter = null;
     for(int i = 0; i < in.length(); i++) {
       char c = in.charAt(i);
       boolean escape = true;
@@ -819,7 +818,7 @@ public class ProxyServlet extends HttpServlet {
         if (outBuf == null) {
           outBuf = new StringBuilder(in.length() + 5*3);
           outBuf.append(in,0,i);
-          formatter = new Formatter(outBuf);
+          try (Formatter formatter = new Formatter(outBuf)) 
         }
         //leading %, 0 padded, width 2, capital hex
         formatter.format("%%%02X",(int)c);//TODO
